# TestOps Export Manager

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Ç–µ—Å—Ç–∫–µ–π—Å–æ–≤ –∏–∑ Allure TestOps —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç** –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 7:00 UTC
- ‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥—Ä—É–ø–ø** (API –∏ UI)
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** —Ñ–∞–π–ª–æ–≤ —Å—Ç–∞—Ä—à–µ –º–µ—Å—è—Ü–∞
- ‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ **Docker Swarm –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è** –¥–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- ‚úÖ **Graceful shutdown** –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –º–æ–¥—É–ª–∏ –¥–ª—è –ª—É—á—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞:

```
pkg/
‚îú‚îÄ‚îÄ config/     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ models/     # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ api/        # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è TestOps
‚îú‚îÄ‚îÄ export/     # –ú–µ–Ω–µ–¥–∂–µ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞
‚îî‚îÄ‚îÄ web/        # –í–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone <repository-url>
   cd testops-export
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º:**
   ```bash
   TESTOPS_TOKEN=your_testops_token_here
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   go run main.go
   ```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   ```
   http://localhost:9090
   ```

### Docker –∑–∞–ø—É—Å–∫

1. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª:**
   ```bash
   TESTOPS_TOKEN=your_testops_token_here
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å Docker Compose:**
   ```bash
   docker-compose up -d
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   docker-compose logs -f
   ```

### Docker Swarm (Production)

–î–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Swarm:

#### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./deploy-swarm.sh init

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./deploy-swarm.sh status

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
./deploy-swarm.sh monitor
```

#### –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Swarm
docker swarm init

# 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞ –¥–ª—è —Ç–æ–∫–µ–Ω–∞
docker secret create testops_token .env

# 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ stack
docker stack deploy -c docker-compose.swarm.yml testops

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker stack services testops
docker stack ps testops

# 5. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker service logs testops_testops-export -f
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Swarm —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ —Å–±–æ—è—Ö
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∏
- üõ°Ô∏è **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —É–∑–ª–æ–≤
- üîÑ **Zero-downtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è
- üìä **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏** —á–µ—Ä–µ–∑ Nginx
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
- üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ Swarm

```bash
# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
docker service scale testops_testops-export=3

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
./deploy-swarm.sh update

# –£–¥–∞–ª–µ–Ω–∏–µ
./deploy-swarm.sh remove

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./deploy-swarm.sh monitor
```

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
./deploy-swarm.sh update
```

- –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç Docker-–æ–±—Ä–∞–∑ –∏ –æ–±–Ω–æ–≤–∏—Ç —Å–µ—Ä–≤–∏—Å –≤ Swarm.
- –≠—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production.

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `TESTOPS_TOKEN` | –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ TestOps | (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| `TESTOPS_BASE_URL` | URL TestOps —Å–µ—Ä–≤–µ—Ä–∞ | `https://allure-testops.wb.ru` |
| `EXPORT_PATH` | –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–æ–≤ | `./exports` |
| `WEB_PORT` | –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ | `9090` |
| `CRON_SCHEDULE` | –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ (cron —Ñ–æ—Ä–º–∞—Ç) | `0 7 * * *` (7:00 UTC) |

- `TESTOPS_TOKEN` ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π API-—Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è access_token (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- `TESTOPS_BASE_URL` ‚Äî –±–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å TestOps (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://allure-testops.wb.ru)

–¢–µ–ø–µ—Ä—å access_token –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ API:

```
curl -s -X POST "${TESTOPS_BASE_URL}/api/uaa/oauth/token" \
     --header "Expect:" \
     --header "Accept: application/json" \
     --form "grant_type=apitoken" \
     --form "scope=openid" \
     --form "token=${TESTOPS_TOKEN}" \
     | jq -r .access_token
```

–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ access_token ‚Äî 1 —á–∞—Å. –ö–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –ì—Ä—É–ø–ø—ã —ç–∫—Å–ø–æ—Ä—Ç–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–≤–µ –≥—Ä—É–ø–ø—ã:
- **API** (ID: 26961091)
- **UI** (ID: 24545654)

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `pkg/config/config.go`.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞

–í—Ä–µ–º—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `CRON_SCHEDULE`:

```bash
# –≠–∫—Å–ø–æ—Ä—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 UTC
CRON_SCHEDULE="0 9 * * *"

# –≠–∫—Å–ø–æ—Ä—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 6:30 UTC
CRON_SCHEDULE="30 6 * * *"

# –≠–∫—Å–ø–æ—Ä—Ç –ø–æ –±—É–¥–Ω—è–º –≤ 8:00 UTC
CRON_SCHEDULE="0 8 * * 1-5"

# –≠–∫—Å–ø–æ—Ä—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ –ø–æ–ª–Ω–æ—á—å UTC
CRON_SCHEDULE="0 0 * * *"
```

**–§–æ—Ä–º–∞—Ç cron:** `–º–∏–Ω—É—Ç—ã —á–∞—Å—ã –¥–µ–Ω—å_–º–µ—Å—è—Ü–∞ –º–µ—Å—è—Ü –¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏`

## –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

–§–∞–π–ª—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `exports/` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```
testops-export/
‚îú‚îÄ‚îÄ exports/                   # –ü–∞–ø–∫–∞ —Å —Ñ–∞–π–ª–∞–º–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ testops_export_API_2025-07-15_12-02-56.csv
‚îÇ   ‚îú‚îÄ‚îÄ testops_export_UI_2025-07-15_12-03-01.csv
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ docker-compose.swarm.yml
‚îî‚îÄ‚îÄ ...
```

### Docker –∏ Swarm

- **Docker Compose:** —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `./exports` –Ω–∞ —Ö–æ—Å—Ç–µ
- **Docker Swarm:** —Ñ–∞–π–ª—ã —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `./exports` –Ω–∞ —Ö–æ—Å—Ç–µ (bind mount)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞.

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞:

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞
cp -r exports/ backup_exports/

# –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
tar -czf exports_backup_$(date +%Y%m%d).tar.gz exports/
```

## –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤** (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤, –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä)
- üìÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º —ç–∫—Å–ø–æ—Ä—Ç–µ**
- üöÄ **–ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞**
- üì• **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞**
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç:
- –ó–∞–ø—É—Å–∫ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
- –û—à–∏–±–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
- –°—Ç–∞—Ç—É—Å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check

Docker Compose –≤–∫–ª—é—á–∞–µ—Ç health check:
```yaml
healthcheck:
  test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:9090"]
  interval: 30s
  timeout: 10s
  retries: 3
  start_period: 40s
```

### –°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –¥–æ 3 —Ä–∞–∑
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É (5, 10, 15 –º–∏–Ω—É—Ç)
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Swarm –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å —É–∑–ª–æ–≤
docker node ls

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker stack services testops

# –ó–∞–¥–∞—á–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
docker stack ps testops

# –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
docker service logs testops_testops-export -f

# –ú–µ—Ç—Ä–∏–∫–∏
docker stats
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
testops-export/
‚îú‚îÄ‚îÄ main.go                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ pkg/                       # –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ api/                  # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ export/               # –ú–µ–Ω–µ–¥–∂–µ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ web/                  # –í–µ–±-—Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ docker-compose.yml        # Docker Compose (dev)
‚îú‚îÄ‚îÄ docker-compose.swarm.yml  # Docker Swarm (prod)
‚îú‚îÄ‚îÄ nginx.conf                # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ deploy-swarm.sh           # –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ Dockerfile                # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ go.mod                    # Go –º–æ–¥—É–ª–∏
‚îî‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≥—Ä—É–ø–ø

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `pkg/config/config.go`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É –≤ –º–∞—Å—Å–∏–≤ `Exports`:
   ```go
   Exports: []models.ExportConfig{
       {GroupID: 26961091, GroupName: "API"},
       {GroupID: 24545654, GroupName: "UI"},
       {GroupID: 12345678, GroupName: "NewGroup"},
   },
   ```

### –°–±–æ—Ä–∫–∞

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
go build -o testops-export

# Docker —Å–±–æ—Ä–∫–∞
docker build -t testops-export .

# Swarm —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./deploy-swarm.sh update
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å Swarm

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Swarm
docker info | grep Swarm

# –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Swarm
docker swarm leave --force
docker swarm init

# –û—á–∏—Å—Ç–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤
docker secret rm testops_token

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞
docker secret create testops_token .env
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ overlay —Å–µ—Ç–∏
docker network ls

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏
docker network create --driver overlay --attachable testops-network
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
docker service update --force testops_testops-export

# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
docker service rollback testops_testops-export
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 